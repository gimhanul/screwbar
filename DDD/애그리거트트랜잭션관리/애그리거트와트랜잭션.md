## 8.1. 애그리거트와 트랜잭션

한 애그리거트를 두 사용자가 동시에 변경할 때 트랜잭션이 필요함.

두 사용자가 동시에 변경하려고 하면, 시간 차이가 나서 두 사용자는 물리적으로 서로 다른 애그리거트 객체를 사용하게 됨. 
그렇게 되면 **애그리거트의 일관성이 깨질 수 있음**.

일관성이 깨지는 문제가 발생하지 않도록 하려면 두 가지 중 하나를 해야 함.

- 한 사용자가 상태를 변경하는 동안, 다른 사용자가 애그리거트를 수정하지 못하게 막음.
- 한 사용자가 정보를 조회한 이후에 정보를 변경하면, 다른 사용자가 다시 조회한 뒤 수정하도록 함.

이 두 가지는 애그리거트 자체의 트랜잭션과 관련이 있음.

> DBMS 가 지원하는 트랜잭션과 함꼐 애그리거트를 위한 추가적인 트랜잭션 처리 기법이 필요함.